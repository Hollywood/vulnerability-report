require('dotenv').config()
const fs = require('fs')
const path = require('path')
const beautify = require("json-beautify");
const vulnerabilities = require('./lib/exportVulnerabilities.js')

async function getSecurityVulnerabilities() {
    
    const vulnerabilityList = []

    const results = await vulnerabilities(null)

    results.forEach(result => {
        vulnerabilityList.push(result)
    });
    
    var json = beautify(vulnerabilityList, null, 2, null)
    var fs = require('fs');
    fs.writeFile('security-vulnerabilities.json', json, function(err){
        if (err) throw err
        console.log('file saved!')
    });
}

getSecurityVulnerabilities()

